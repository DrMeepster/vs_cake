//-----------------------------------------------------------------------
//------------------- Copyright (c) samisalreadytaken -------------------
//                       github.com/samisalreadytaken
//-----------------------------------------------------------------------
if(!("Glow"in::getroottable())||typeof::Glow!="table"||!("Set"in::Glow)){::Glow<-{function Set(S,c,s,D){local g=Get(S);if(g)::print("Glow::Set: Found linked glow, updating.\n");else{foreach(e in _list)if(e.IsValid()){local p=e.GetMoveParent();if(!p||!p.IsValid()){g=e;break}};if(g)g.SetModel(S.GetModelName());else{g=::CreateProp("prop_dynamic_glow",S.GetOrigin(),S.GetModelName(),0);_list.append(g)};::VS.SetKeyInt(g,"rendermode",6);::VS.SetKeyInt(g,"renderamt",0);::VS.SetParent(g,S);::VS.MakePermanent(g)};if(typeof c=="string")::VS.SetKeyString(g,"glowcolor",c);else if(typeof c=="Vector")::VS.SetKeyVector(g,"glowcolor",c);else throw"parameter 2 has an invalid type '"+typeof c+"' ; expected 'string|Vector'";;::VS.SetKeyInt(g,"glowstyle",s);::VS.SetKeyInt(g,"glowdist",D);::VS.SetKeyInt(g,"glowenabled",1);::VS.SetKeyInt(g,"effects",EF_DEFAULT);return g}function Disable(S){local g=Get(S);if(g){::VS.SetKeyInt(g,"effects",EF_DEFAULT|EF_NODRAW);::VS.SetParent(g,null);::EntFireByHandle(g,"setglowdisabled")}else::print("Glow::Disable: No glow found.\n");return g}function Get(S){if(::VS.IsPointSized(S)||!S.GetModelName().len())throw"Glow: Invalid source entity";foreach(i,p in _list)if(p.IsValid()){if(p.GetMoveParent()==S)return p}else _list.remove(i)}EF_DEFAULT=(1<<0|1<<11)|1<<14,EF_NODRAW=1<<5,_list=[]}};;
